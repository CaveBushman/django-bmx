{% extends 'base.html' %} {% block title %} Ranking {% endblock title %}
{% block content %}

<h1 class="text-4xl text-black-900 text-center mt-4 py-3 text-purple-700">NÁRODNÍ RANKING</h1>

<div class="container">

    <p class="text-justify mt-3">Do národního rankingu jsou započítávány výsledky z Mistrovství České republiky
        jednotlivců, 8 nejlepších výsledků
        Českého poháru, 6 nejlepších výsledků České ligy, Moravské ligy a volných
        závodů (dohromady). Mistrovství České republiky družstev se do národního rankingu nezapočítává a všichni jezdci z něj získávají 0
        bodů. Kategorie Příchozí není do rankingu započítávána. Do rankingu se započítávájí závody za posledních 365 dní a jezdci si body přenáší na konci roku sebou mezi
        kategoriemi.</p>

    <form method="POST" id = "rankingForm">
        {% csrf_token %}
        <div class="container mt-4">
            <div class="row">

                <div class="col-sm"> <h1 class="text-center text-3xl text-blue-600">{{category | upper}}</h1></div>

                <div class="col-sm">
                    <select class="form-select mt-3" aria-label="Default select example" name="categoryInput" id="categoryInput">
                        <option selected>Vyber kategorii:</option>
                        {% for category in categories %}
                        <option value="{{category}}">{{category}}</option>
                        {% endfor %}
                    </select>
                </div>
               
                <script>
                    const selectEl = document.getElementById("categoryInput")
                    selectEl.addEventListener('change', () => document.getElementById("rankingForm").submit())
                </script>
            </div>
        </div>
    </form>

    <table class="table table-hover mt-2 align-middle">
        <thead>
        <tr>
            <th scope="col">#</th>
            <th>St.č.</th>
            <th class="hidden sm:table-cell"></th>
            <th scope="col">Příjmení</th>
            <th scope="col">Jméno</th>
            <th class="hidden md:table-cell">UCI ID</th>
            <th scope="col">Klub</th>
            <th scope="col">Počet bodů</th>
        </tr>
        </thead>
        <tbody>
        {% for result in results %}
        <tr>
            {% if cruiser %}
            <th scope="row">{{result.ranking_24}}.</th>
            {% else %}
            <th scope="row">{{result.ranking_20}}.</th>
            {% endif %}
            <td>{{result.plate}}</td>
            <td class="hidden sm:table-cell"><img
                class="avatar img-fluid rounded-circle "
                src="{{result.photo.url}}"
                alt=""
                sizes="10px"
                srcset=""
                style="width: 2rem; height: 2rem"
              /></td>
            <td><a href="{% url 'rider:detail' result.id %}" style="text-decoration: none; color:black"><b>{{result.last_name|upper}}</b></a></td>
            <td>{{result.first_name}}</td>
            <td class = "text-sm hidden md:table-cell">{{result.uci_id}}</td>
            <td class="text-sm">{{result.club|upper}}</td>
            {% if cruiser %}
            <td class = "text-sm">{{result.points_24}}</td>
            {% else %}
            <td class = "text-sm">{{result.points_20}}</td>
            {% endif %}
        </tr>
        {% endfor %}
        </tbody>
    </table>
</div>

{% endblock content %}
