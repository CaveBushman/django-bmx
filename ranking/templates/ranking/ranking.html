{% extends 'base.html' %} {% block title %} Ranking {% endblock title %}
{% block content %}

<h1 class="text-4xl text-black-900 text-center mt-4 py-3 text-purple-700 dark:text-purple-300">NÁRODNÍ RANKING</h1>

<div class="container">

    <p class="text-justify mt-3 dark:text-gray-200">Do národního rankingu jsou započítávány výsledky z Mistrovství České republiky
        jednotlivců, 8 nejlepších výsledků
        Českého poháru, 6 nejlepších výsledků České ligy, Moravské ligy a volných
        závodů (dohromady). Mistrovství České republiky družstev se do národního rankingu nezapočítává a všichni jezdci z něj získávají 0
        bodů. Kategorie Příchozí není do rankingu započítávána. Do rankingu se započítávájí závody za posledních 365 dní a jezdci si body přenáší na konci roku sebou mezi
        kategoriemi.</p>

    <form method="POST" id = "rankingForm">
        {% csrf_token %}
        <div class="container mt-4">
            <div class="">
                <div class="text-4xl text-center dark:dark--header">
                    {{category|upper}}
                </div>
            </div>
            <div class="">
                <label for="categoryInput" class="block text-lg font-medium text-gray-700 dark:text-gray-200">Vyber kategorii</label>
                <select id="categoryInput" name="categoryInput" class="mt-1 max-w-md block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md">
                    <option selected>Vyber kategorii</option>
                        {% for category in categories %}
                    <option value="{{category}}">{{category}}</option>
                        {% endfor %}
                </select>
            </div>
                <script>
                    const selectEl = document.getElementById("categoryInput")
                    selectEl.addEventListener('change', () => document.getElementById("rankingForm").submit())
                </script>
        </div>
    </form>

    <table class="table table-hover my-4 align-middle">
        <thead>
        <tr>
            <th scope="col" class="dark:text-gray-200">#</th>
            <th class="dark:text-gray-200">St.č.</th>
            <th class="hidden sm:table-cell dark:text-gray-200"></th>
            <th scope="col" class="dark:text-gray-200">Příjmení</th>
            <th scope="col" class="dark:text-gray-200">Jméno</th>
            <th class="hidden md:table-cell dark:text-gray-200">UCI ID</th>
            <th scope="col" class="dark:text-gray-200 hidden sm:table-cell">Klub</th>
            <th scope="col" class="dark:text-gray-200">Počet bodů</th>
        </tr>
        </thead>
        <tbody>
        {% for result in results %}
        <tr>
            {% if cruiser %}
            <th scope="row" class="dark:text-gray-200">{{result.ranking_24}}.</th>
            {% else %}
            <th scope="row" class="dark:text-gray-200">{{result.ranking_20}}.</th>
            {% endif %}
            <td class = "dark:text-gray-200">{{result.plate}}</td>
            <td class="hidden sm:table-cell"><img
                class="avatar img-fluid rounded-circle "
                src="{{result.photo.url}}"
                alt=""
                sizes="10px"
                srcset=""
                style="width: 2rem; height: 2rem"
              /></td>
            <td><a href="{% url 'rider:detail' result.id %}" style="text-decoration: none" class="text-black dark:text-gray-200"><b>{{result.last_name|upper}}</b></a></td>
            <td class="dark:text-gray-200">{{result.first_name}}</td>
            <td class = "text-sm hidden md:table-cell dark:text-gray-200">{{result.uci_id}}</td>
            <td class="text-sm dark:text-gray-200 hidden sm:table-cell">{{result.club|upper}}</td>
            {% if cruiser %}
            <td class = "text-sm dark:text-gray-200">{{result.points_24}}</td>
            {% else %}
            <td class = "text-sm dark:text-gray-200">{{result.points_20}}</td>
            {% endif %}
        </tr>
        {% endfor %}
        </tbody>
    </table>
</div>

{% endblock content %}
